'use strict';

(function () {
  function Factory (ApiUtil, $http, $q, $timeout) {
    function LocalityDetail () { };

    LocalityDetail.cities = [ ];
    LocalityDetail.localities = { };

    LocalityDetail.getCities = function () {
      return $http.get(ApiUtil.fullPath('/locality_details/cities'))
        .then(function (res) {
          var d = res.data.data;
          d.forEach(function(item){
            LocalityDetail.cities.push(item);
          })
          return d;
        });
    };

    LocalityDetail.getLocalities = function (city) {
      return $http.get(ApiUtil.fullPath('/locality_details/localities'), {params: {city: city}})
        .then(function (res) {
          var d = res.data.data;
          LocalityDetail.localities[city] = d;
          return d;
        });
    };

    LocalityDetail.getStats = function (locality_details) {
      var defer = $q.defer();
      $timeout(function(){
        var stats = JSON.parse("[{\"name\":\"armane nagar\",\"search\":548},{\"name\":\"krishnarajapura\",\"search\":3965},{\"name\":\"kommasandra\",\"search\":37},{\"name\":\"bileshivale\",\"search\":11},{\"name\":\"medahalli\",\"search\":55},{\"name\":\"kannur\",\"search\":1},{\"name\":\"doddabidarakull\",\"search\":2},{\"name\":\"akshayanagar\",\"search\":992},{\"name\":\"guddadahalli\",\"search\":18},{\"name\":\"sulikunte\",\"search\":15},{\"name\":\"bapagrama\",\"search\":6},{\"name\":\"margondanahalli\",\"search\":15},{\"name\":\"jayanagar\",\"search\":12691},{\"name\":\"hormavu\",\"search\":174},{\"name\":\"yeshwanthpur\",\"search\":3441},{\"name\":\"t dasarahalli\",\"search\":363},{\"name\":\"bommanahalli\",\"search\":5315},{\"name\":\"vibhutipura\",\"search\":499},{\"name\":\"gottigere\",\"search\":1224},{\"name\":\"kannamangala\",\"search\":337},{\"name\":\"bikasipura\",\"search\":251},{\"name\":\"andrahalli\",\"search\":7},{\"name\":\"gollarapalya hosahalli\",\"search\":8},{\"name\":\"gollahalli\",\"search\":88},{\"name\":\"hesaraghatta\",\"search\":1},{\"name\":\"kalyan nagar\",\"search\":6772},{\"name\":\"narayanapura\",\"search\":446},{\"name\":\"gantiganahalli\",\"search\":2},{\"name\":\"aduru\",\"search\":12},{\"name\":\"doddabele\",\"search\":1},{\"name\":\"challaghatta\",\"search\":548},{\"name\":\"bodanahosahalli\",\"search\":47},{\"name\":\"kodipalya\",\"search\":56},{\"name\":\"yamare\",\"search\":1},{\"name\":\"srinivaspura\",\"search\":428},{\"name\":\"mailasandra\",\"search\":551},{\"name\":\"kanakapura road\",\"search\":435},{\"name\":\"boovanahalli\",\"search\":2},{\"name\":\"balagere\",\"search\":281},{\"name\":\"jayamahal\",\"search\":259},{\"name\":\"lingadheeranahalli\",\"search\":116},{\"name\":\"new tharagupet\",\"search\":29},{\"name\":\"whitefield\",\"search\":75895},{\"name\":\"mahalakshmi layout\",\"search\":1094},{\"name\":\"btm layout 1\",\"search\":3424},{\"name\":\"bannerughatta\",\"search\":439},{\"name\":\"sunkalpalya\",\"search\":181},{\"name\":\"kartik nagar\",\"search\":450},{\"name\":\"kattigenahalli\",\"search\":111},{\"name\":\"sahakara nagar\",\"search\":252},{\"name\":\"bilijaji\",\"search\":11},{\"name\":\"agrahara layout\",\"search\":2},{\"name\":\"meesaganahalli\",\"search\":1},{\"name\":\"thippasandra\",\"search\":605},{\"name\":\"carmelaram\",\"search\":143},{\"name\":\"neelasandra\",\"search\":256},{\"name\":\"byatarayanapura\",\"search\":467},{\"name\":\"avalahalli\",\"search\":46},{\"name\":\"padarayana pura\",\"search\":25},{\"name\":\"bhyraveshwara nagar\",\"search\":6},{\"name\":\"kaval byrasandra\",\"search\":1},{\"name\":\"rajajinagar\",\"search\":1710},{\"name\":\"vidyaranyapura\",\"search\":1217},{\"name\":\"srinivasa nagar\",\"search\":75},{\"name\":\"ulsoor\",\"search\":7283},{\"name\":\"kadugondanahalli\",\"search\":330},{\"name\":\"sivanchetti gardens\",\"search\":325},{\"name\":\"benson town\",\"search\":756},{\"name\":\"nimbekaipura\",\"search\":28},{\"name\":\"vishveshwaraya nagar\",\"search\":11},{\"name\":\"chansandra\",\"search\":1548},{\"name\":\"jalahalli east\",\"search\":59},{\"name\":\"battarahalli\",\"search\":186},{\"name\":\"tirumanahalli\",\"search\":167},{\"name\":\"kasavanahalli\",\"search\":2107},{\"name\":\"mavalli\",\"search\":398},{\"name\":\"thurahalli\",\"search\":263},{\"name\":\"gandhi nagar\",\"search\":441},{\"name\":\"bangalore city municipal corporation layout\",\"search\":246},{\"name\":\"attibele\",\"search\":13},{\"name\":\"dodda nekkundi\",\"search\":2},{\"name\":\"koramangala\",\"search\":60885},{\"name\":\"yelahanka new town\",\"search\":2361},{\"name\":\"bettadasanapura\",\"search\":114},{\"name\":\"halasahalli\",\"search\":117},{\"name\":\"ramamurthy nagar\",\"search\":3693},{\"name\":\"maruthi nagar\",\"search\":275},{\"name\":\"sanjeevini nagar\",\"search\":69},{\"name\":\"thammenahalli village\",\"search\":54},{\"name\":\"murugeshpalya\",\"search\":957},{\"name\":\"kumbalgodu\",\"search\":20},{\"name\":\"kadabagere\",\"search\":2},{\"name\":\"bellandur\",\"search\":38752},{\"name\":\"laggere\",\"search\":120},{\"name\":\"chikkakannalli\",\"search\":227},{\"name\":\"sorahunase\",\"search\":221},{\"name\":\"gopasandra\",\"search\":10},{\"name\":\"mylappanahalli\",\"search\":2},{\"name\":\"basavanagudi\",\"search\":5250},{\"name\":\"yemalur\",\"search\":2439},{\"name\":\"chikkalasandra\",\"search\":416},{\"name\":\"btm layout\",\"search\":25351},{\"name\":\"nagapura\",\"search\":194},{\"name\":\"smv layout\",\"search\":12},{\"name\":\"devanahalli\",\"search\":99},{\"name\":\"hunasamaranahalli\",\"search\":59},{\"name\":\"vasanth nagar\",\"search\":3092},{\"name\":\"mallathahalli\",\"search\":346},{\"name\":\"mahadevapura\",\"search\":12825},{\"name\":\"kadubeesanahalli\",\"search\":6565},{\"name\":\"kodihalli\",\"search\":2197},{\"name\":\"kengeri satellite town\",\"search\":1014},{\"name\":\"hosapalaya\",\"search\":64},{\"name\":\"indira nagar\",\"search\":544},{\"name\":\"annapurneshwari nagar\",\"search\":136},{\"name\":\"vivek nagar\",\"search\":28},{\"name\":\"doddajala\",\"search\":9},{\"name\":\"attiguppe\",\"search\":447},{\"name\":\"victoria layout\",\"search\":808},{\"name\":\"chikkajala\",\"search\":37},{\"name\":\"dooravani nagar\",\"search\":486},{\"name\":\"rampura\",\"search\":6},{\"name\":\"nrithyagram\",\"search\":7},{\"name\":\"thirumalashettyhally\",\"search\":320},{\"name\":\"ckikkakammana halli\",\"search\":18},{\"name\":\"chikkasanne\",\"search\":8},{\"name\":\"dasanapura\",\"search\":1},{\"name\":\"banashankari 6th stage\",\"search\":7},{\"name\":\"kumaraswamy layout\",\"search\":2501},{\"name\":\"chikkanagamangala\",\"search\":23},{\"name\":\"kempe gowda nagar\",\"search\":3},{\"name\":\"panathur\",\"search\":3541},{\"name\":\"ashok nagar\",\"search\":2598},{\"name\":\"jakkuru\",\"search\":287},{\"name\":\"aavalahalli\",\"search\":278},{\"name\":\"new thippasandra\",\"search\":370},{\"name\":\"adugodi\",\"search\":1778},{\"name\":\"kamakshipalya\",\"search\":3},{\"name\":\"cottonpet\",\"search\":1},{\"name\":\"halanayakanahalli\",\"search\":412},{\"name\":\"konadasapura\",\"search\":207},{\"name\":\"sunkadakatte\",\"search\":110},{\"name\":\"nehru nagar\",\"search\":70},{\"name\":\"madivala\",\"search\":96},{\"name\":\"muthanallur\",\"search\":18},{\"name\":\"shanti nagar\",\"search\":2579},{\"name\":\"ganga nagar\",\"search\":907},{\"name\":\"chandapura\",\"search\":382},{\"name\":\"langford gardens\",\"search\":198},{\"name\":\"byraveshwara industrial estate\",\"search\":13},{\"name\":\"hoodi\",\"search\":6538},{\"name\":\"yelahanka\",\"search\":2905},{\"name\":\"varthur\",\"search\":1294},{\"name\":\"basaveshwara nagar\",\"search\":51},{\"name\":\"padmanabhanagar\",\"search\":1319},{\"name\":\"thanisandra\",\"search\":3142},{\"name\":\"raghuvanahalli\",\"search\":43},{\"name\":\"chamarajpet\",\"search\":46},{\"name\":\"madanayakahalli\",\"search\":8},{\"name\":\"muneshwara nagar\",\"search\":427},{\"name\":\"maruthi sevanagar\",\"search\":736},{\"name\":\"lingarajapuram\",\"search\":1226},{\"name\":\"channanayakanapalya\",\"search\":4},{\"name\":\"mallasandra\",\"search\":13},{\"name\":\"tunganagara\",\"search\":5},{\"name\":\"central telecom society\",\"search\":16},{\"name\":\"bidadi\",\"search\":1},{\"name\":\"hrbr layout\",\"search\":1459},{\"name\":\"gnana bharathi\",\"search\":38},{\"name\":\"basavanapura\",\"search\":16},{\"name\":\"cholur palya\",\"search\":4},{\"name\":\"bychapura\",\"search\":8},{\"name\":\"kadugodi\",\"search\":5183},{\"name\":\"kaggadasapura\",\"search\":5017},{\"name\":\"kempegowda nagar\",\"search\":110},{\"name\":\"tejaswini nagar\",\"search\":201},{\"name\":\"anchepalya\",\"search\":22},{\"name\":\"mangammanapalya\",\"search\":516},{\"name\":\"marathahalli\",\"search\":53391},{\"name\":\"mathikere\",\"search\":4305},{\"name\":\"hbr layout\",\"search\":6522},{\"name\":\"bennigana halli\",\"search\":732},{\"name\":\"malleshwaram\",\"search\":1325},{\"name\":\"rr nagar\",\"search\":5157},{\"name\":\"hallehalli\",\"search\":132},{\"name\":\"kyalasanahalli\",\"search\":17},{\"name\":\"vijayanagar\",\"search\":2320},{\"name\":\"mylasandra\",\"search\":293},{\"name\":\"bagalakunte\",\"search\":65},{\"name\":\"bharat nagar\",\"search\":14},{\"name\":\"nandini layout\",\"search\":821},{\"name\":\"begur\",\"search\":1042},{\"name\":\"subramanyapura\",\"search\":487},{\"name\":\"gunjur palya\",\"search\":159},{\"name\":\"narayanaghatta\",\"search\":4},{\"name\":\"kurubarahalli\",\"search\":105},{\"name\":\"bommasandra\",\"search\":103},{\"name\":\"srinivaspur\",\"search\":4},{\"name\":\"nayandahalli\",\"search\":14},{\"name\":\"varadharaja nagar\",\"search\":5},{\"name\":\"cooke town\",\"search\":797},{\"name\":\"bommenahalli\",\"search\":1},{\"name\":\"k channasandra\",\"search\":15},{\"name\":\"sultanpalya\",\"search\":238},{\"name\":\"devinagar\",\"search\":241},{\"name\":\"kempapura agrahara\",\"search\":223},{\"name\":\"uttarahalli\",\"search\":236},{\"name\":\"tippenahalli\",\"search\":11},{\"name\":\"thirumagondanahalli\",\"search\":18},{\"name\":\"koppa gate\",\"search\":1},{\"name\":\"panduranga nagar\",\"search\":674},{\"name\":\"hommadevanahalli\",\"search\":13},{\"name\":\"hebbal\",\"search\":7174},{\"name\":\"ramagondanahalli\",\"search\":342},{\"name\":\"state bank of india colony\",\"search\":12},{\"name\":\"nagegowdanapalya\",\"search\":8},{\"name\":\"singanayakanahalli\",\"search\":5},{\"name\":\"kogilu\",\"search\":23},{\"name\":\"banashankari\",\"search\":5670},{\"name\":\"visthar\",\"search\":223},{\"name\":\"hongasandra\",\"search\":1069},{\"name\":\"doddakannelli\",\"search\":1549},{\"name\":\"singasandra\",\"search\":2060},{\"name\":\"yarandahalli\",\"search\":156},{\"name\":\"harlur\",\"search\":1330},{\"name\":\"jigani\",\"search\":15},{\"name\":\"sompura\",\"search\":2},{\"name\":\"ejipura\",\"search\":5059},{\"name\":\"sampangi rama nagar\",\"search\":1627},{\"name\":\"singena agrahara\",\"search\":12},{\"name\":\"kammanahalli\",\"search\":4025},{\"name\":\"parappana agrahara\",\"search\":446},{\"name\":\"doddabommasandra\",\"search\":301},{\"name\":\"hulimavu\",\"search\":2326},{\"name\":\"frazer town\",\"search\":389},{\"name\":\"munnekollal\",\"search\":4263},{\"name\":\"dommasandra\",\"search\":160},{\"name\":\"sevashrama\",\"search\":101},{\"name\":\"anjanapura\",\"search\":3},{\"name\":\"wilson garden\",\"search\":2474},{\"name\":\"hosakerehalli\",\"search\":576},{\"name\":\"chikkabidarakallu\",\"search\":137},{\"name\":\"hegganahalli\",\"search\":193},{\"name\":\"virupakshapura\",\"search\":36},{\"name\":\"huvinayakanahalli\",\"search\":6},{\"name\":\"richmond town\",\"search\":1909},{\"name\":\"vignana kendra\",\"search\":85},{\"name\":\"kodathi\",\"search\":93},{\"name\":\"sannatammanahalli\",\"search\":31},{\"name\":\"bendre nagar\",\"search\":69},{\"name\":\"mullur\",\"search\":106},{\"name\":\"kachohalli\",\"search\":2},{\"name\":\"chikkagubbi village\",\"search\":11},{\"name\":\"byadarahalli\",\"search\":11},{\"name\":\"jinkethimmanahalli\",\"search\":3},{\"name\":\"thyvakanahally\",\"search\":2},{\"name\":\"chambenahalli\",\"search\":1},{\"name\":\"agrahara\",\"search\":36},{\"name\":\"kanakapura\",\"search\":69},{\"name\":\"cheemasandra\",\"search\":25},{\"name\":\"sanjay gandhi nagar\",\"search\":2},{\"name\":\"nagarathpet\",\"search\":1},{\"name\":\"kalkere\",\"search\":257},{\"name\":\"kothanur\",\"search\":618},{\"name\":\"jalahalli west\",\"search\":131},{\"name\":\"gulimangala\",\"search\":49},{\"name\":\"deepanjali nagar\",\"search\":49},{\"name\":\"chokkanahalli\",\"search\":236},{\"name\":\"kada agrahara\",\"search\":14},{\"name\":\"jnana ganga nagar\",\"search\":135},{\"name\":\"richards town\",\"search\":221},{\"name\":\"vidyamanya nagar\",\"search\":13},{\"name\":\"banaswadi\",\"search\":2184},{\"name\":\"rt nagar\",\"search\":4872},{\"name\":\"sheshadripuram\",\"search\":685},{\"name\":\"gattahalli\",\"search\":75},{\"name\":\"guttahalli\",\"search\":459},{\"name\":\"agrahara dasarahalli\",\"search\":33},{\"name\":\"anekal\",\"search\":6},{\"name\":\"sarjapur\",\"search\":1990},{\"name\":\"jogupalya\",\"search\":498},{\"name\":\"vittasandra\",\"search\":89},{\"name\":\"jyothi nagar\",\"search\":22},{\"name\":\"thotada guddadhalli village\",\"search\":18},{\"name\":\"electronic city\",\"search\":24939},{\"name\":\"kudlu\",\"search\":402},{\"name\":\"binnipete\",\"search\":168},{\"name\":\"kithaganur village\",\"search\":7},{\"name\":\"kaggalipura\",\"search\":347},{\"name\":\"abbigere\",\"search\":42},{\"name\":\"pavamanapura\",\"search\":12},{\"name\":\"vimanapura\",\"search\":374},{\"name\":\"ullal\",\"search\":1},{\"name\":\"kaveri nagar\",\"search\":38},{\"name\":\"jp nagar\",\"search\":12417},{\"name\":\"nagenahalli\",\"search\":156},{\"name\":\"basapura\",\"search\":562},{\"name\":\"shettigere\",\"search\":6},{\"name\":\"bellahalli\",\"search\":40},{\"name\":\"gummanahalli\",\"search\":6},{\"name\":\"palace guttahalli\",\"search\":35},{\"name\":\"nelamangala\",\"search\":22},{\"name\":\"hoskote\",\"search\":15},{\"name\":\"domlur\",\"search\":11561},{\"name\":\"c v raman nagar\",\"search\":6767},{\"name\":\"dasarahalli\",\"search\":751},{\"name\":\"seegehalli\",\"search\":219},{\"name\":\"rukmini nagar\",\"search\":13},{\"name\":\"malur\",\"search\":1},{\"name\":\"dombarahalli\",\"search\":1},{\"name\":\"shivaji nagar\",\"search\":2415},{\"name\":\"kodigehalli\",\"search\":634},{\"name\":\"azad nagar\",\"search\":39},{\"name\":\"bedarahalli\",\"search\":18},{\"name\":\"weavers colony\",\"search\":3},{\"name\":\"kaikondrahalli\",\"search\":3700},{\"name\":\"bilekahalli\",\"search\":2735},{\"name\":\"koti hosahalli\",\"search\":194},{\"name\":\"kalena agrahara\",\"search\":347},{\"name\":\"hombegowda nagar\",\"search\":201},{\"name\":\"madhura nagar\",\"search\":52},{\"name\":\"nagasandra\",\"search\":79},{\"name\":\"bidaraguppe\",\"search\":10},{\"name\":\"chandra layout extension\",\"search\":2},{\"name\":\"nagadevana halli\",\"search\":2},{\"name\":\"brookefield\",\"search\":9037},{\"name\":\"amrutahalli\",\"search\":184},{\"name\":\"arakere\",\"search\":129},{\"name\":\"soundarya layout\",\"search\":26},{\"name\":\"peenya industrial area\",\"search\":25},{\"name\":\"yelenahalli\",\"search\":6},{\"name\":\"concorde napa valley\",\"search\":13},{\"name\":\"srirampuram\",\"search\":2},{\"name\":\"jagajeevanram nagar\",\"search\":18},{\"name\":\"jyotipuram\",\"search\":2},{\"name\":\"nagarbhavi\",\"search\":2320},{\"name\":\"jeevan bima nagar\",\"search\":2209},{\"name\":\"konanakunte\",\"search\":387},{\"name\":\"jalahalli\",\"search\":637},{\"name\":\"devara jeevanahalli\",\"search\":125},{\"name\":\"rmv extension stage 2\",\"search\":151},{\"name\":\"kariyana palya\",\"search\":14},{\"name\":\"doddanekundi\",\"search\":2951},{\"name\":\"chokkasandra\",\"search\":20},{\"name\":\"cox town\",\"search\":990},{\"name\":\"sanjay nagar\",\"search\":190},{\"name\":\"suryanagar\",\"search\":20},{\"name\":\"sadduguntepalya\",\"search\":132},{\"name\":\"gunjur village\",\"search\":81},{\"name\":\"sampigehalli\",\"search\":19},{\"name\":\"somasundarapalya\",\"search\":291},{\"name\":\"belathur\",\"search\":72},{\"name\":\"kasturi nagar\",\"search\":4684},{\"name\":\"kengeri\",\"search\":1652},{\"name\":\"bapuji nagar\",\"search\":32},{\"name\":\"ittangur\",\"search\":6},{\"name\":\"shankarapuram\",\"search\":20},{\"name\":\"hsr layout\",\"search\":56599},{\"name\":\"nagavara\",\"search\":3896},{\"name\":\"choodasandra\",\"search\":143},{\"name\":\"anagalapura\",\"search\":10},{\"name\":\"anand nagar\",\"search\":11},{\"name\":\"ramohalli\",\"search\":4},{\"name\":\"heelalige\",\"search\":5},{\"name\":\"lakshmipura\",\"search\":3},{\"name\":\"devarachikkana halli\",\"search\":434},{\"name\":\"hebbal kempapura\",\"search\":2605},{\"name\":\"kodipur\",\"search\":147},{\"name\":\"kachamaranahalli\",\"search\":98},{\"name\":\"byrathi\",\"search\":242},{\"name\":\"hennur\",\"search\":489},{\"name\":\"rayasandra\",\"search\":475},{\"name\":\"hennagara\",\"search\":21},{\"name\":\"choudadenahalli\",\"search\":19}]");
        defer.resolve({localityDetails: locality_details, stats: stats});
      }, 500);
      return defer.promise;
    };

    LocalityDetail.getLocalitiesAndStats = function (city) {
      return LocalityDetail.getLocalities(city).then(LocalityDetail.getStats);
    };


    return LocalityDetail;
  };

  angular
    .module('app.api')
    .factory('ApiLocalityDetail', [
      'ApiUtil',
      '$http',
      '$q',
      '$timeout',
      Factory
    ]);
}());
